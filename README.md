# RemDB

## TODO

Value Log 目前实验的回收方案有两种，一种是从旧文件触发 GC 并扫描到新文件，一种是运行时统计每个文件的触发时机。

目前正在实验的是，同时使用两种计分方式

- 首先记录 compact 时被丢弃的 kv ，其指向的 vlog 文件，触发 vlog gc 时得分最高与次高文件将被回收，如果这个得分超过一个阈值的话
- 其次每次访问 vlog 时需要临时记录一下每个文件被访问的次数，最少被访问的文件也将考虑被回收，因为他们可能已经是无法触及的记录了

第一个记录解决的是 kv 被丢弃的问题，第二个则是考虑到可能存在不安全关闭的问题，当重启时这些文件将可能不会被记录在其中。由于第二个可能会导致引入一些不必要的开销，因此目前正在实验是否采用从最旧文件直接 GC 的方式代替第二种 GC 。